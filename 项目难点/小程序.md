# 小程序的相关回答

一个小程序页面由四个文件组成，分别是：

|文件类型|必需|作用
---|---|---
|js|是|页面逻辑
|wxml|是|页面结构
|json|否|页面配置
|wxss|否|页面样式表

两个配置文件：app.json(应用的全局配置)、page.json(页面的全局配置)

两个函数：App()小程序注册入口 和 Page()页面注册入口

app.json 和 page.json 维护了应用和页面的配置属性。App() 和 Page() 维护了应用和页面的各个生命周期以及数据。

---
在实现过程中，非常难的点并是不很多，毕竟微信已经做了一层很好的包装，然后比较难的点是怎么在小程序里面实现一些原生APP的效果，我觉得

## setData

setData 函数用于将**数据从逻辑层发送到视图层**（异步），同时改变对应的 this.data 的值（同步）

为了提高性能,不可能改变一次数据渲染一次页面,等所有data改变完之后一块渲染页面。

小程序的视图层目前使用 WebView 作为渲染载体，而逻辑层是由独立的 JavascriptCore 作为运行环境。在架构上，WebView 和 JavascriptCore 都是独立的模块，并不具备数据直接共享的通道。

一个小程序存在多个界面，所以渲染层存在多个 WebView 线程。 逻辑层和渲染层的通信会经由微信客户端（Native）做中转，逻辑层发送网络请求也经由 Native 转发 ，小程序的通信模型如图：

![通信模型](https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/%E4%B8%8B%E8%BD%BD.png)
